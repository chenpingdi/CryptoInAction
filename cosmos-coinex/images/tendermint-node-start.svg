<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="805px" preserveAspectRatio="none" style="width:672px;height:805px;" version="1.1" viewBox="0 0 672 805" width="672px" zoomAndPan="magnify"><defs><filter height="300%" id="f195jkh9b3kv6p" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f195jkh9b3kv6p)" height="677.2109" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="107" y="69.7988"/><rect fill="#FFFFFF" filter="url(#f195jkh9b3kv6p)" height="459.0371" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="219" y="258.6621"/><rect fill="#FFFFFF" filter="url(#f195jkh9b3kv6p)" height="82.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="224" y="380.5938"/><rect fill="#FFFFFF" filter="url(#f195jkh9b3kv6p)" height="40.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="229" y="422.9043"/><rect fill="#FFFFFF" filter="url(#f195jkh9b3kv6p)" height="64.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="374" y="128.4199"/><rect fill="#FFFFFF" filter="url(#f195jkh9b3kv6p)" height="188.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="374" y="499.5254"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="41" x2="41" y1="38.4883" y2="765.0098"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="112" x2="112" y1="38.4883" y2="765.0098"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="224" x2="224" y1="38.4883" y2="765.0098"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="379" x2="379" y1="38.4883" y2="765.0098"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="492" x2="492" y1="38.4883" y2="765.0098"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="561" x2="561" y1="38.4883" y2="765.0098"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="630" x2="630" y1="38.4883" y2="765.0098"/><rect fill="#FEFECE" filter="url(#f195jkh9b3kv6p)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="15" y="23.5352">Service</text><rect fill="#FEFECE" filter="url(#f195jkh9b3kv6p)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="8" y="764.0098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="15" y="784.5449">Service</text><rect fill="#FEFECE" filter="url(#f195jkh9b3kv6p)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="85" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="92" y="23.5352">Node</text><rect fill="#FEFECE" filter="url(#f195jkh9b3kv6p)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="85" y="764.0098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="92" y="784.5449">Node</text><rect fill="#FEFECE" filter="url(#f195jkh9b3kv6p)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="146" x="149" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="132" x="156" y="23.5352">MultiplexTransport</text><rect fill="#FEFECE" filter="url(#f195jkh9b3kv6p)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="146" x="149" y="764.0098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="132" x="156" y="784.5449">MultiplexTransport</text><rect fill="#FEFECE" filter="url(#f195jkh9b3kv6p)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="348" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="355" y="23.5352">Switch</text><rect fill="#FEFECE" filter="url(#f195jkh9b3kv6p)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="348" y="764.0098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="355" y="784.5449">Switch</text><rect fill="#FEFECE" filter="url(#f195jkh9b3kv6p)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="457" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="464" y="23.5352">Reactor</text><rect fill="#FEFECE" filter="url(#f195jkh9b3kv6p)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="457" y="764.0098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="464" y="784.5449">Reactor</text><rect fill="#FEFECE" filter="url(#f195jkh9b3kv6p)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="45" x="537" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="544" y="23.5352">peer</text><rect fill="#FEFECE" filter="url(#f195jkh9b3kv6p)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="45" x="537" y="764.0098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="544" y="784.5449">peer</text><rect fill="#FEFECE" filter="url(#f195jkh9b3kv6p)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="65" x="596" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="603" y="23.5352">PeerSet</text><rect fill="#FEFECE" filter="url(#f195jkh9b3kv6p)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="65" x="596" y="764.0098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="603" y="784.5449">PeerSet</text><rect fill="#FFFFFF" filter="url(#f195jkh9b3kv6p)" height="677.2109" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="107" y="69.7988"/><rect fill="#FFFFFF" filter="url(#f195jkh9b3kv6p)" height="459.0371" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="219" y="258.6621"/><rect fill="#FFFFFF" filter="url(#f195jkh9b3kv6p)" height="82.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="224" y="380.5938"/><rect fill="#FFFFFF" filter="url(#f195jkh9b3kv6p)" height="40.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="229" y="422.9043"/><rect fill="#FFFFFF" filter="url(#f195jkh9b3kv6p)" height="64.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="374" y="128.4199"/><rect fill="#FFFFFF" filter="url(#f195jkh9b3kv6p)" height="188.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="374" y="499.5254"/><polygon fill="#A80036" points="95,65.7988,105,69.7988,95,73.7988,99,69.7988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="41" x2="101" y1="69.7988" y2="69.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="48" y="65.0566">OnStart</text><polygon fill="#A80036" points="212,95.1094,222,99.1094,212,103.1094,216,99.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="117" x2="218" y1="99.1094" y2="99.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="38" x="124" y="94.3672">Listen</text><polygon fill="#A80036" points="362,124.4199,372,128.4199,362,132.4199,366,128.4199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="117" x2="368" y1="128.4199" y2="128.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="124" y="123.6777">Start</text><polygon fill="#A80036" points="480,153.7305,490,157.7305,480,161.7305,484,157.7305" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="486" y1="157.7305" y2="157.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="391" y="152.9883">Start</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="426" y1="192.041" y2="192.041"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="426" x2="426" y1="192.041" y2="205.041"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="379" x2="426" y1="205.041" y2="205.041"/><polygon fill="#A80036" points="389,201.041,379,205.041,389,209.041,385,205.041" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="391" y="187.2988">acceptRoutine</text><polygon fill="#A80036" points="367,225.3516,377,229.3516,367,233.3516,371,229.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="117" x2="373" y1="229.3516" y2="229.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="124" y="224.6094">DialPeersAsync</text><polygon fill="#A80036" points="240,254.6621,230,258.6621,240,262.6621,236,258.6621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234" x2="378" y1="258.6621" y2="258.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="246" y="253.9199">Dial</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="229" x2="271" y1="287.9727" y2="287.9727"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="271" x2="271" y1="287.9727" y2="300.9727"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="230" x2="271" y1="300.9727" y2="300.9727"/><polygon fill="#A80036" points="240,296.9727,230,300.9727,240,304.9727,236,300.9727" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="236" y="283.2305">fileterConn</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="229" x2="271" y1="330.2832" y2="330.2832"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="271" x2="271" y1="330.2832" y2="343.2832"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="230" x2="271" y1="343.2832" y2="343.2832"/><polygon fill="#A80036" points="240,339.2832,230,343.2832,240,347.2832,236,343.2832" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="236" y="325.541">upgrade</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="229" x2="276" y1="367.5938" y2="367.5938"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="276" x2="276" y1="367.5938" y2="380.5938"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235" x2="276" y1="380.5938" y2="380.5938"/><polygon fill="#A80036" points="245,376.5938,235,380.5938,245,384.5938,241,380.5938" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="241" y="362.8516">wrapPeer</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="234" x2="281" y1="409.9043" y2="409.9043"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="281" x2="281" y1="409.9043" y2="422.9043"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="240" x2="281" y1="422.9043" y2="422.9043"/><polygon fill="#A80036" points="250,418.9043,240,422.9043,250,426.9043,246,422.9043" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="246" y="405.1621">newPeer</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="239" x2="281" y1="462.2148" y2="462.2148"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="281" x2="281" y1="462.2148" y2="475.2148"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234" x2="281" y1="475.2148" y2="475.2148"/><polygon fill="#A80036" points="244,471.2148,234,475.2148,244,479.2148,240,475.2148" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="246" y="457.4727">createMConnection</text><polygon fill="#A80036" points="362,495.5254,372,499.5254,362,503.5254,366,499.5254" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="229" x2="368" y1="499.5254" y2="499.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="236" y="494.7832">addPeer</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="426" y1="528.8359" y2="528.8359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="426" x2="426" y1="528.8359" y2="541.8359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="385" x2="426" y1="541.8359" y2="541.8359"/><polygon fill="#A80036" points="395,537.8359,385,541.8359,395,545.8359,391,541.8359" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="391" y="524.0938">filterPeer</text><polygon fill="#A80036" points="480,567.1465,490,571.1465,480,575.1465,484,571.1465" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="486" y1="571.1465" y2="571.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="391" y="566.4043">InitPeer</text><polygon fill="#A80036" points="549.5,596.457,559.5,600.457,549.5,604.457,553.5,600.457" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="555.5" y1="600.457" y2="600.457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="391" y="595.7148">Start</text><polygon fill="#A80036" points="618.5,625.7676,628.5,629.7676,618.5,633.7676,622.5,629.7676" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="624.5" y1="629.7676" y2="629.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="391" y="625.0254">Add</text><polygon fill="#A80036" points="480,655.0781,490,659.0781,480,663.0781,484,659.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="486" y1="659.0781" y2="659.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="391" y="654.3359">AddPeer</text><polygon fill="#A80036" points="240,684.3887,230,688.3887,240,692.3887,236,688.3887" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="234" x2="378" y1="688.3887" y2="688.3887"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="38" x="246" y="683.6465">return</text><polygon fill="#A80036" points="128,713.6992,118,717.6992,128,721.6992,124,717.6992" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="122" x2="223" y1="717.6992" y2="717.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="38" x="134" y="712.957">return</text><polygon fill="#A80036" points="52,743.0098,42,747.0098,52,751.0098,48,747.0098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="46" x2="111" y1="747.0098" y2="747.0098"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="38" x="58" y="742.2676">return</text><!--MD5=[e3d509a43a628805c85de3616d25314f]
@startuml

Service -> Node: OnStart

activate Node
	Node -> MultiplexTransport: Listen
	Node -> Switch: Start
	activate Switch
		Switch -> Reactor: Start
		Switch -> Switch: acceptRoutine
	deactivate Switch
	Node -> Switch: DialPeersAsync
	Switch -> MultiplexTransport: Dial

	activate MultiplexTransport
		MultiplexTransport -> MultiplexTransport: fileterConn
		MultiplexTransport -> MultiplexTransport: upgrade
		MultiplexTransport -> MultiplexTransport: wrapPeer

		activate MultiplexTransport	
			MultiplexTransport -> MultiplexTransport: newPeer
			activate MultiplexTransport	
				MultiplexTransport -> MultiplexTransport: createMConnection
			deactivate MultiplexTransport	
		deactivate MultiplexTransport
	
		MultiplexTransport -> Switch: addPeer

			activate Switch
				Switch -> Switch: filterPeer
	
				Switch -> Reactor: InitPeer
				Switch -> peer: Start
				Switch -> PeerSet: Add
				Switch -> Reactor: AddPeer
				Switch - -> MultiplexTransport: return
				deactivate Switch
		MultiplexTransport - -> Node: return
	deactivate MultiplexTransport
Node - -> Service: return
deactivate Node

@enduml

PlantUML version 1.2019.13(Wed Dec 11 01:18:29 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 13.0.1+9
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: CN
--></g></svg>